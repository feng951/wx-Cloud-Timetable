<!--profile.wxml-->
<view class="container">
  <!-- æœªç™»å½•çŠ¶æ€ -->
  <view wx:if="{{!isLoggedIn}}" class="login-section">
    <view class="login-icon">ğŸ‘¤</view>
    <text class="login-title">æ¬¢è¿ä½¿ç”¨é£è¡¨</text>
    <text class="login-subtitle">ç™»å½•åå¯ç®¡ç†æ‚¨çš„è¯¾è¡¨</text>
    <!-- ä½¿ç”¨ button çš„ open-type è·å–ç”¨æˆ·ä¿¡æ¯ -->
    <button 
      class="login-btn" 
      bindtap="login"
      loading="{{isLoading}}"
    >
      <text class="btn-text">å¾®ä¿¡ç™»å½•</text>
    </button>
  </view>

  <!-- å·²ç™»å½•çŠ¶æ€ -->
  <view wx:if="{{isLoggedIn}}" class="profile-content">
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-card">
      <image 
        class="user-avatar" 
        src="{{userInfo.avatarUrl || '/images/avatar.png'}}" 
        mode="aspectFill"
        binderror="onAvatarError"
      ></image>
      <view class="user-info">
        <text class="user-name">{{userInfo.nickName || 'å¾®ä¿¡ç”¨æˆ·'}}</text>
        <text class="user-id">ID: {{userId || 'A0000'}}</text>
      </view>
    </view>

    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <view class="stats-card">
      <view class="stat-item">
        <text class="stat-num">{{timetableCount}}</text>
        <text class="stat-label">æˆ‘çš„è¯¾è¡¨</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-num">{{courseCount}}</text>
        <text class="stat-label">è¯¾ç¨‹æ€»æ•°</text>
      </view>
    </view>

    <!-- åŠŸèƒ½èœå• -->
    <view class="menu-section">
      <view class="menu-group">
        <view class="menu-item" bindtap="manageTimetables">
          <view class="menu-left">
            <view class="menu-icon blue">ğŸ“š</view>
            <text class="menu-text">ç®¡ç†è¯¾è¡¨</text>
          </view>
          <text class="menu-arrow">â€º</text>
        </view>
      </view>

      <view class="menu-group">
        <view class="menu-item" bindtap="about">
          <view class="menu-left">
            <view class="menu-icon orange">â„¹</view>
            <text class="menu-text">å…³äºæˆ‘ä»¬</text>
          </view>
          <text class="menu-arrow">â€º</text>
        </view>
      </view>
    </view>

    <!-- é€€å‡ºç™»å½• -->
    <view class="logout-section">
      <button class="logout-btn" bindtap="logout">
        <text class="btn-text">é€€å‡ºç™»å½•</text>
      </button>
    </view>
  </view>
</view>
