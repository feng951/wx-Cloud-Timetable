<!--courseInput.wxml-->
<view class="container">
  <!-- è¡¨å•åŒºåŸŸ -->
  <scroll-view class="form-scroll" scroll-y>
    <view class="form-content">
      <!-- è¯¾ç¨‹åç§° -->
      <view class="form-item">
        <view class="item-icon blue">ğŸ“–</view>
        <input class="item-input" placeholder="è¯¾ç¨‹åç§°" value="{{course.name}}" bindinput="inputName"/>
      </view>

      <!-- é¢œè‰²é€‰æ‹© -->
      <view class="form-item" bindtap="showColorPicker">
        <view class="item-icon purple">ğŸ¨</view>
        <text class="item-label">{{course.color ? 'ç‚¹å‡»æ›´æ”¹é¢œè‰²' : 'é€‰æ‹©è¯¾ç¨‹é¢œè‰²'}}</text>
        <view class="color-preview" style="background-color: {{course.color}}"></view>
      </view>

      <!-- å­¦åˆ† -->
      <view class="form-item">
        <view class="item-icon yellow">ğŸ†</view>
        <input class="item-input" placeholder="å­¦åˆ†ï¼ˆå¯ä¸å¡«ï¼‰" type="digit" value="{{course.credit}}" bindinput="inputCredit"/>
      </view>

      <!-- å¤‡æ³¨ -->
      <view class="form-item">
        <view class="item-icon green">ğŸ“</view>
        <input class="item-input" placeholder="å¤‡æ³¨ï¼ˆå¯ä¸å¡«ï¼‰" value="{{course.remark}}" bindinput="inputRemark"/>
      </view>

      <!-- æ—¶é—´æ®µ -->
      <view class="section-title">æ—¶é—´æ®µ</view>
      <view class="time-section">
        <!-- å‘¨æ•°é€‰æ‹© - æ”¹ä¸ºå¤é€‰ -->
        <view class="time-item week-select" bindtap="showWeekPicker">
          <view class="time-icon">ğŸ“…</view>
          <view class="time-content">
            <text class="time-label">ä¸Šè¯¾å‘¨æ•°</text>
            <text class="time-value">{{selectedWeeksText}}</text>
          </view>
          <text class="arrow">â€º</text>
        </view>

        <!-- å•åŒå‘¨é€‰æ‹© -->
        <view class="odd-even-section">
          <view class="odd-even-item {{oddEven === 0 ? 'active' : ''}}" bindtap="selectOddEven" data-value="0">å…¨å‘¨</view>
          <view class="odd-even-item {{oddEven === 1 ? 'active' : ''}}" bindtap="selectOddEven" data-value="1">å•å‘¨</view>
          <view class="odd-even-item {{oddEven === 2 ? 'active' : ''}}" bindtap="selectOddEven" data-value="2">åŒå‘¨</view>
        </view>

        <view class="time-item">
          <view class="time-icon">â°</view>
          <picker mode="multiSelector" range="{{timeRange}}" value="{{timeIndex}}" bindchange="onTimeChange">
            <view class="time-text">{{weekDays[day]}} ç¬¬ {{course.startPeriod}} - {{course.endPeriod}} èŠ‚</view>
          </picker>
        </view>

        <!-- è‡ªå®šä¹‰æ—¶é—´è¾“å…¥ -->
        <view wx:if="{{useCustomTime}}" class="custom-time-inputs">
          <view class="custom-input-item">
            <text class="custom-label">å¼€å§‹æ—¶é—´</text>
            <picker mode="time" value="{{customStartTime}}" bindchange="onCustomStartChange">
              <view class="custom-value">{{customStartTime}}</view>
            </picker>
          </view>
          <view class="custom-input-item">
            <text class="custom-label">ç»“æŸæ—¶é—´</text>
            <picker mode="time" value="{{customEndTime}}" bindchange="onCustomEndChange">
              <view class="custom-value">{{customEndTime}}</view>
            </picker>
          </view>
        </view>
      </view>

      <!-- æ•™å¸ˆ -->
      <view class="form-item">
        <view class="item-icon orange">ğŸ‘¤</view>
        <input class="item-input" placeholder="æˆè¯¾è€å¸ˆï¼ˆå¯ä¸å¡«ï¼‰" value="{{course.teacher}}" bindinput="inputTeacher"/>
      </view>

      <!-- ä¸Šè¯¾åœ°ç‚¹ -->
      <view class="form-item">
        <view class="item-icon red">ğŸ“</view>
        <input class="item-input" placeholder="ä¸Šè¯¾åœ°ç‚¹ï¼ˆå¯ä¸å¡«ï¼‰" value="{{course.location}}" bindinput="inputLocation"/>
      </view>
    </view>

    <!-- åˆ é™¤æŒ‰é’® -->
    <view wx:if="{{isEdit}}" class="delete-section">
      <button class="delete-btn" bindtap="deleteCourse">åˆ é™¤è¯¾ç¨‹</button>
    </view>

    <!-- åº•éƒ¨å ä½ -->
    <view class="bottom-space"></view>
  </scroll-view>

  <!-- é¢œè‰²é€‰æ‹©å™¨å¼¹çª— -->
  <view wx:if="{{showColorPicker}}" class="color-picker-mask" bindtap="hideColorPicker">
    <view class="color-picker" catchtap="preventHide">
      <view class="picker-title">é€‰æ‹©é¢œè‰²</view>
      <view class="color-grid">
        <view wx:for="{{colors}}" wx:key="*this" 
              class="color-option {{course.color === item ? 'active' : ''}}" 
              style="background-color: {{item}}"
              bindtap="selectColor" 
              data-color="{{item}}"></view>
      </view>
    </view>
  </view>

  <!-- å‘¨æ•°é€‰æ‹©å¼¹çª— -->
  <view wx:if="{{showWeekPicker}}" class="week-picker-mask" bindtap="hideWeekPicker">
    <view class="week-picker" catchtap="preventHide">
      <view class="picker-header">
        <text class="picker-cancel" bindtap="hideWeekPicker">å–æ¶ˆ</text>
        <text class="picker-title">é€‰æ‹©ä¸Šè¯¾å‘¨æ•°</text>
        <text class="picker-confirm" bindtap="confirmWeekPicker">ç¡®å®š</text>
      </view>
      <view class="week-grid">
        <view wx:for="{{weekOptions}}" wx:key="index" 
              class="week-item {{item.selected ? 'selected' : ''}} {{item.disabled ? 'disabled' : ''}}"
              bindtap="toggleWeek" 
              data-index="{{index}}">
          <text class="week-num">{{item.week}}å‘¨</text>
        </view>
      </view>
      <view class="quick-actions">
        <text class="quick-btn" bindtap="selectAllWeeks">å…¨é€‰</text>
        <text class="quick-btn" bindtap="selectOddWeeks">å•å‘¨</text>
        <text class="quick-btn" bindtap="selectEvenWeeks">åŒå‘¨</text>
        <text class="quick-btn" bindtap="clearWeeks">æ¸…ç©º</text>
      </view>
    </view>
  </view>
</view>